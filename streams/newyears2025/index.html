<html>
<link href="./index.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,800,900,1000&display=swap"
    rel="stylesheet">
<link href="https://lcedit.com/odometer/odometer.css" rel="stylesheet">
<script src="https://lcedit.com/odometer/odometer.js"></script>

<body style="background-color: black; color: white;">
    <div class="main" id="main" style="margin-top: 7.5px; display: grid; grid-template-columns: repeat(5, 1fr);">
        <div class="column_1 column">
            <div class="card card_0" id="card_0">
                <div class="num" id="num_0">01</div>
                <img src="./blank.png" alt id="fire_0" class="fire">
                <img src="./default.png" alt id="image_0" class="image">
                <div class="name" id="name_0">Loading</div>
                <div class="count odometer" id="count_0">0</div>
            </div>
            <div class="card card_1" id="card_1">
                <div class="num" id="num_1">02</div>
                <img src="./blank.png" alt id="fire_1" class="fire">
                <img src="./default.png" alt id="image_1" class="image">
                <div class="name" id="name_1">Loading</div>
                <div class="count odometer" id="count_1">0</div>
            </div>
            <div class="card card_2" id="card_2">
                <div class="num" id="num_2">03</div>
                <img src="./blank.png" alt id="fire_2" class="fire">
                <img src="./default.png" alt id="image_2" class="image">
                <div class="name" id="name_2">Loading</div>
                <div class="count odometer" id="count_2">0</div>
            </div>
            <div class="card card_3" id="card_3">
                <div class="num" id="num_3">04</div>
                <img src="./blank.png" alt id="fire_3" class="fire">
                <img src="./default.png" alt id="image_3" class="image">
                <div class="name" id="name_3">Loading</div>
                <div class="count odometer" id="count_3">0</div>
            </div>
            <div class="card card_4" id="card_4">
                <div class="num" id="num_4">05</div>
                <img src="./blank.png" alt id="fire_4" class="fire">
                <img src="./default.png" alt id="image_4" class="image">
                <div class="name" id="name_4">Loading</div>
                <div class="count odometer" id="count_4">0</div>
            </div>
            <div class="card card_5" id="card_5">
                <div class="num" id="num_5">06</div>
                <img src="./blank.png" alt id="fire_5" class="fire">
                <img src="./default.png" alt id="image_5" class="image">
                <div class="name" id="name_5">Loading</div>
                <div class="count odometer" id="count_5">0</div>
            </div>
            <div class="card card_6" id="card_6">
                <div class="num" id="num_6">07</div>
                <img src="./blank.png" alt id="fire_6" class="fire">
                <img src="./default.png" alt id="image_6" class="image">
                <div class="name" id="name_6">Loading</div>
                <div class="count odometer" id="count_6">0</div>
            </div>
            <div class="card card_7" id="card_7">
                <div class="num" id="num_7">08</div>
                <img src="./blank.png" alt id="fire_7" class="fire">
                <img src="./default.png" alt id="image_7" class="image">
                <div class="name" id="name_7">Loading</div>
                <div class="count odometer" id="count_7">0</div>
            </div>
            <div class="card card_8" id="card_8">
                <div class="num" id="num_8">09</div>
                <img src="./blank.png" alt id="fire_8" class="fire">
                <img src="./default.png" alt id="image_8" class="image">
                <div class="name" id="name_8">Loading</div>
                <div class="count odometer" id="count_8">0</div>
            </div>
            <div class="card card_9" id="card_9">
                <div class="num" id="num_9">10</div>
                <img src="./blank.png" alt id="fire_9" class="fire">
                <img src="./default.png" alt id="image_9" class="image">
                <div class="name" id="name_9">Loading</div>
                <div class="count odometer" id="count_9">0</div>
            </div>
        </div>
        <div class="column_2 column">
            <div class="card card_10" id="card_10">
                <div class="num" id="num_10">11</div>
                <img src="./blank.png" alt id="fire_10" class="fire">
                <img src="./default.png" alt id="image_10" class="image">
                <div class="name" id="name_10">Loading</div>
                <div class="count odometer" id="count_10">0</div>
            </div>
            <div class="card card_11" id="card_11">
                <div class="num" id="num_11">12</div>
                <img src="./blank.png" alt id="fire_11" class="fire">
                <img src="./default.png" alt id="image_11" class="image">
                <div class="name" id="name_11">Loading</div>
                <div class="count odometer" id="count_11">0</div>
            </div>
            <div class="card card_12" id="card_12">
                <div class="num" id="num_12">13</div>
                <img src="./blank.png" alt id="fire_12" class="fire">
                <img src="./default.png" alt id="image_12" class="image">
                <div class="name" id="name_12">Loading</div>
                <div class="count odometer" id="count_12">0</div>
            </div>
            <div class="card card_13" id="card_13">
                <div class="num" id="num_13">14</div>
                <img src="./blank.png" alt id="fire_13" class="fire">
                <img src="./default.png" alt id="image_13" class="image">
                <div class="name" id="name_13">Loading</div>
                <div class="count odometer" id="count_13">0</div>
            </div>
            <div class="card card_14" id="card_14">
                <div class="num" id="num_14">15</div>
                <img src="./blank.png" alt id="fire_14" class="fire">
                <img src="./default.png" alt id="image_14" class="image">
                <div class="name" id="name_14">Loading</div>
                <div class="count odometer" id="count_14">0</div>
            </div>
            <div class="card card_15" id="card_15">
                <div class="num" id="num_15">16</div>
                <img src="./blank.png" alt id="fire_15" class="fire">
                <img src="./default.png" alt id="image_15" class="image">
                <div class="name" id="name_15">Loading</div>
                <div class="count odometer" id="count_15">0</div>
            </div>
            <div class="card card_16" id="card_16">
                <div class="num" id="num_16">17</div>
                <img src="./blank.png" alt id="fire_16" class="fire">
                <img src="./default.png" alt id="image_16" class="image">
                <div class="name" id="name_16">Loading</div>
                <div class="count odometer" id="count_16">0</div>
            </div>
            <div class="card card_17" id="card_17">
                <div class="num" id="num_17">18</div>
                <img src="./blank.png" alt id="fire_17" class="fire">
                <img src="./default.png" alt id="image_17" class="image">
                <div class="name" id="name_17">Loading</div>
                <div class="count odometer" id="count_17">0</div>
            </div>
            <div class="card card_18" id="card_18">
                <div class="num" id="num_18">19</div>
                <img src="./blank.png" alt id="fire_18" class="fire">
                <img src="./default.png" alt id="image_18" class="image">
                <div class="name" id="name_18">Loading</div>
                <div class="count odometer" id="count_18">0</div>
            </div>
            <div class="card card_19" id="card_19">
                <div class="num" id="num_19">20</div>
                <img src="./blank.png" alt id="fire_19" class="fire">
                <img src="./default.png" alt id="image_19" class="image">
                <div class="name" id="name_19">Loading</div>
                <div class="count odometer" id="count_19">0</div>
            </div>
        </div>
        <div class="column_3 column">
            <div class="card card_20" id="card_20">
                <div class="num" id="num_20">21</div>
                <img src="./blank.png" alt id="fire_20" class="fire">
                <img src="./default.png" alt id="image_20" class="image">
                <div class="name" id="name_20">Loading</div>
                <div class="count odometer" id="count_20">0</div>
            </div>
            <div class="card card_21" id="card_21">
                <div class="num" id="num_21">22</div>
                <img src="./blank.png" alt id="fire_21" class="fire">
                <img src="./default.png" alt id="image_21" class="image">
                <div class="name" id="name_21">Loading</div>
                <div class="count odometer" id="count_21">0</div>
            </div>
            <div class="card card_22" id="card_22">
                <div class="num" id="num_22">23</div>
                <img src="./blank.png" alt id="fire_22" class="fire">
                <img src="./default.png" alt id="image_22" class="image">
                <div class="name" id="name_22">Loading</div>
                <div class="count odometer" id="count_22">0</div>
            </div>
            <div class="card card_23" id="card_23">
                <div class="num" id="num_23">24</div>
                <img src="./blank.png" alt id="fire_23" class="fire">
                <img src="./default.png" alt id="image_23" class="image">
                <div class="name" id="name_23">Loading</div>
                <div class="count odometer" id="count_23">0</div>
            </div>
            <div class="card card_24" id="card_24">
                <div class="num" id="num_24">25</div>
                <img src="./blank.png" alt id="fire_24" class="fire">
                <img src="./default.png" alt id="image_24" class="image">
                <div class="name" id="name_24">Loading</div>
                <div class="count odometer" id="count_24">0</div>
            </div>
            <div class="card card_25" id="card_25">
                <div class="num" id="num_25">26</div>
                <img src="./blank.png" alt id="fire_25" class="fire">
                <img src="./default.png" alt id="image_25" class="image">
                <div class="name" id="name_25">Loading</div>
                <div class="count odometer" id="count_25">0</div>
            </div>
            <div class="card card_26" id="card_26">
                <div class="num" id="num_26">27</div>
                <img src="./blank.png" alt id="fire_26" class="fire">
                <img src="./default.png" alt id="image_26" class="image">
                <div class="name" id="name_26">Loading</div>
                <div class="count odometer" id="count_26">0</div>
            </div>
            <div class="card card_27" id="card_27">
                <div class="num" id="num_27">28</div>
                <img src="./blank.png" alt id="fire_27" class="fire">
                <img src="./default.png" alt id="image_27" class="image">
                <div class="name" id="name_27">Loading</div>
                <div class="count odometer" id="count_27">0</div>
            </div>
            <div class="card card_28" id="card_28">
                <div class="num" id="num_28">29</div>
                <img src="./blank.png" alt id="fire_28" class="fire">
                <img src="./default.png" alt id="image_28" class="image">
                <div class="name" id="name_28">Loading</div>
                <div class="count odometer" id="count_28">0</div>
            </div>
            <div class="card card_29" id="card_29">
                <div class="num" id="num_29">30</div>
                <img src="./blank.png" alt id="fire_29" class="fire">
                <img src="./default.png" alt id="image_29" class="image">
                <div class="name" id="name_29">Loading</div>
                <div class="count odometer" id="count_29">0</div>
            </div>
        </div>
        <div class="column_4 column">
            <div class="card card_30" id="card_30">
                <div class="num" id="num_30">31</div>
                <img src="./blank.png" alt id="fire_30" class="fire">
                <img src="./default.png" alt id="image_30" class="image">
                <div class="name" id="name_30">Loading</div>
                <div class="count odometer" id="count_30">0</div>
            </div>
            <div class="card card_31" id="card_31">
                <div class="num" id="num_31">32</div>
                <img src="./blank.png" alt id="fire_31" class="fire">
                <img src="./default.png" alt id="image_31" class="image">
                <div class="name" id="name_31">Loading</div>
                <div class="count odometer" id="count_31">0</div>
            </div>
            <div class="card card_32" id="card_32">
                <div class="num" id="num_32">33</div>
                <img src="./blank.png" alt id="fire_32" class="fire">
                <img src="./default.png" alt id="image_32" class="image">
                <div class="name" id="name_32">Loading</div>
                <div class="count odometer" id="count_32">0</div>
            </div>
            <div class="card card_33" id="card_33">
                <div class="num" id="num_33">34</div>
                <img src="./blank.png" alt id="fire_33" class="fire">
                <img src="./default.png" alt id="image_33" class="image">
                <div class="name" id="name_33">Loading</div>
                <div class="count odometer" id="count_33">0</div>
            </div>
            <div class="card card_34" id="card_34">
                <div class="num" id="num_34">35</div>
                <img src="./blank.png" alt id="fire_34" class="fire">
                <img src="./default.png" alt id="image_34" class="image">
                <div class="name" id="name_34">Loading</div>
                <div class="count odometer" id="count_34">0</div>
            </div>
            <div class="card card_35" id="card_35">
                <div class="num" id="num_35">36</div>
                <img src="./blank.png" alt id="fire_35" class="fire">
                <img src="./default.png" alt id="image_35" class="image">
                <div class="name" id="name_35">Loading</div>
                <div class="count odometer" id="count_35">0</div>
            </div>
            <div class="card card_36" id="card_36">
                <div class="num" id="num_36">37</div>
                <img src="./blank.png" alt id="fire_36" class="fire">
                <img src="./default.png" alt id="image_36" class="image">
                <div class="name" id="name_36">Loading</div>
                <div class="count odometer" id="count_36">0</div>
            </div>
            <div class="card card_37" id="card_37">
                <div class="num" id="num_37">38</div>
                <img src="./blank.png" alt id="fire_37" class="fire">
                <img src="./default.png" alt id="image_37" class="image">
                <div class="name" id="name_37">Loading</div>
                <div class="count odometer" id="count_37">0</div>
            </div>
            <div class="card card_38" id="card_38">
                <div class="num" id="num_38">39</div>
                <img src="./blank.png" alt id="fire_38" class="fire">
                <img src="./default.png" alt id="image_38" class="image">
                <div class="name" id="name_38">Loading</div>
                <div class="count odometer" id="count_38">0</div>
            </div>
            <div class="card card_39" id="card_39">
                <div class="num" id="num_39">40</div>
                <img src="./blank.png" alt id="fire_39" class="fire">
                <img src="./default.png" alt id="image_39" class="image">
                <div class="name" id="name_39">Loading</div>
                <div class="count odometer" id="count_39">0</div>
            </div>
        </div>
    </div>
</body>
<script>
    odometers = Odometer.init();
    for (let i = 0; i < 40; i++) {
        odometers[i].options = {
            animation: "minimal",
            downColor: "white",
            duration: 0.5 * 1000,
            removeLeadingZeros: true,
            reverseAnimation: false,
            format: "dddd:ddd:dd:dd:dd",
            upColor: "white"
        }
    }

// ---------- CONFIG ----------
const TARGET_UTC_DATE = new Date("2026-01-01T00:00:00Z");
const MAX_RENDER = 40;

// ---------- STATE ----------
let rawTimezones = [];
let initialisedTimezones = [];

// ---------- UTIL ----------
function padZero(num) {
    return String(Math.abs(num)).padStart(2, "0");
}

// ---------- FETCH & INIT ----------
fetch("./timezones.json")
    .then(res => res.json())
    .then(data => {
        rawTimezones = data.timezones;
        initialiseTimezones();
        startCountdown();
    })
    .catch(err => console.error("Error fetching timezones:", err));

// ---------- INITIALISE TIMEZONES (RUNS ONCE) ----------
function initialiseTimezones() {
    initialisedTimezones = [];

    for (let i = 0; i < rawTimezones.length; i++) {
        const tz = rawTimezones[i];

        if (!tz || !tz.timezone || !Array.isArray(tz.flags)) {
            console.warn(`Skipping invalid timezone at index ${i}`, tz);
            continue;
        }

        // Parse offset (UTCÂ±HH:MM)
        const offsetStr = tz.timezone;
        const sign = offsetStr.charAt(3) === "-" ? -1 : 1;
        const parts = offsetStr.slice(4).split(":");

        const hours = parseInt(parts[0], 10) || 0;
        const minutes = parseInt(parts[1], 10) || 0;

        const totalOffsetMinutes = sign * (hours * 60 + minutes);

        if (isNaN(totalOffsetMinutes)) {
            console.warn(`Invalid offset: ${offsetStr}`);
            continue;
        }

        initialisedTimezones.push({
            offset: tz.timezone,
            flags: tz.flags.map(f => f.flag_url),
            offsetMinutes: totalOffsetMinutes
        });
    }
}

// ---------- START INTERVAL ----------
function startCountdown() {
    updateCountdowns(); // initial paint
    setInterval(updateCountdowns, 1000);
}

// ---------- UPDATE EVERY SECOND ----------
function updateCountdowns() {
    const now = new Date();

    let computed = initialisedTimezones.map(tz => {
        const targetDate = new Date(TARGET_UTC_DATE);
        targetDate.setMinutes(targetDate.getMinutes() - tz.offsetMinutes);

        const timeDiff = targetDate - now;

        let days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        let hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        let minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
        let seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

        return {
            ...tz,
            timeDiff,
            timeUntil2025:
                timeDiff >= 0
                    ? `${padZero(days)}${padZero(hours)}${padZero(minutes)}${padZero(seconds)}`
                    : "0"
        };
    });

    // Sort by earliest time
    computed.sort((a, b) => a.timeDiff - b.timeDiff);

    renderUI(computed);
}

// ---------- RENDER ----------
function renderUI(timezones) {
    for (let i = 0; i < MAX_RENDER; i++) {
        const tz = timezones[i];
        if (!tz) continue;

        const image = document.getElementById(`image_${i}`);
        const name = document.getElementById(`name_${i}`);
        const count = document.getElementById(`count_${i}`);

        if (image && tz.flags.length) {
            image.src = tz.flags[i % tz.flags.length];
        }

        if (name) {
            name.textContent = tz.offset;
        }

        if (count) {
            count.textContent = tz.timeUntil2025;
        }
    }
}

</script>

</html>
